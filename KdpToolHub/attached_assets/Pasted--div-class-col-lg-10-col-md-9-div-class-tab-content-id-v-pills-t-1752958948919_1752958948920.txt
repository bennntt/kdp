<div class="col-lg-10 col-md-9">
                            <div class="tab-content" id="v-pills-tabContent">
                                <!-- Account Settings Tab -->
    <!-- Change Email Modal -->
    <div class="modal fade" id="changeEmailModal" tabindex="-1" aria-labelledby="changeEmailModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content bg-dark">
                <div class="modal-header border-secondary">
                    <h5 class="modal-title text-warning" id="changeEmailModalLabel">
                        <i class="fas fa-envelope me-2"></i>Change Email Address
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="changeEmailForm">
                        <div class="mb-3">
                            <label for="newEmail" class="form-label">New Email Address</label>
                            <input type="email" class="form-control" id="newEmail" required="">
                        </div>
                        <div class="mb-3">
                            <label for="currentPasswordEmail" class="form-label">Current Password</label>
                            <input type="password" class="form-control" id="currentPasswordEmail" required="">
                            <div class="form-text">Enter your current password to confirm this change</div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer border-secondary">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-warning" onclick="submitChangeEmail()">Change Email</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Change Password Modal -->
    <div class="modal fade" id="changePasswordModal" tabindex="-1" aria-labelledby="changePasswordModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content bg-dark">
                <div class="modal-header border-secondary">
                    <h5 class="modal-title text-warning" id="changePasswordModalLabel">
                        <i class="fas fa-key me-2"></i>Change Password
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="changePasswordForm">
                        <div class="mb-3">
                            <label for="currentPasswordChange" class="form-label">Current Password</label>
                            <input type="password" class="form-control" id="currentPasswordChange" required="">
                        </div>
                        <div class="mb-3">
                            <label for="newPassword" class="form-label">New Password</label>
                            <input type="password" class="form-control" id="newPassword" required="">
                            <div class="form-text">Password must be at least 8 characters long</div>
                        </div>
                        <div class="mb-3">
                            <label for="confirmNewPassword" class="form-label">Confirm New Password</label>
                            <input type="password" class="form-control" id="confirmNewPassword" required="">
                        </div>
                    </form>
                </div>
                <div class="modal-footer border-secondary">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-warning" onclick="submitChangePassword()">Change Password</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Delete Account Modal -->
    <div class="modal fade" id="deleteAccountModal" tabindex="-1" aria-labelledby="deleteAccountModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content bg-dark border-danger">
                <div class="modal-header border-danger">
                    <h5 class="modal-title text-danger" id="deleteAccountModalLabel">
                        <i class="fas fa-exclamation-triangle me-2"></i>Delete Account
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="alert alert-danger">
                        <strong>Warning:</strong> This action cannot be undone. All your data will be permanently deleted.
                    </div>
                    <form id="deleteAccountForm">
                        <div class="mb-3">
                            <label for="deleteConfirmation" class="form-label">Type "DELETE" to confirm</label>
                            <input type="text" class="form-control" id="deleteConfirmation" required="">
                        </div>
                        <div class="mb-3">
                            <label for="currentPasswordDelete" class="form-label">Current Password</label>
                            <input type="password" class="form-control" id="currentPasswordDelete" required="">
                        </div>
                    </form>
                </div>
                <div class="modal-footer border-danger">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-danger" onclick="submitDeleteAccount()">Delete Account</button>
                </div>
            </div>
        </div>
    </div>

    <script>

        function showSettings() {
        }

        function showChangeEmailForm() {
            const emailModal = new bootstrap.Modal(document.getElementById('changeEmailModal'));
            emailModal.show();
        }

        function showChangePasswordForm() {
            const passwordModal = new bootstrap.Modal(document.getElementById('changePasswordModal'));
            passwordModal.show();
        }

        function showDeleteAccountForm() {
            const deleteModal = new bootstrap.Modal(document.getElementById('deleteAccountModal'));
            deleteModal.show();
        }

        function showCancelSubscriptionForm() {
            // Implement subscription cancellation logic
            alert('Subscription cancellation feature will be implemented');
        }

        async function saveAccountSettings() {
            const settings = {
                firstName: document.getElementById('firstName').value,
                lastName: document.getElementById('lastName').value,
                country: document.getElementById('country').value,
                city: document.getElementById('city').value,
                address1: document.getElementById('address1').value,
                address2: document.getElementById('address2').value,
                zipCode: document.getElementById('zipCode').value
            };

            try {
                const response = await fetch('/tools/save-account-settings', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(settings)
                });

                const data = await response.json();
                
                if (data.success) {
                    showToast(data.message, 'success');
                } else {
                    showToast(data.message, 'error');
                }
            } catch (error) {
                showToast('Error saving settings', 'error');
            }
        }

        async function submitChangeEmail() {
            const newEmail = document.getElementById('newEmail').value;
            const currentPassword = document.getElementById('currentPasswordEmail').value;

            try {
                const response = await fetch('/tools/change-email', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        newEmail: newEmail,
                        currentPassword: currentPassword
                    })
                });

                const data = await response.json();
                
                if (data.success) {
                    showToast(data.message, 'success');
                    bootstrap.Modal.getInstance(document.getElementById('changeEmailModal')).hide();
                    setTimeout(() => location.reload(), 2000);
                } else {
                    showToast(data.message, 'error');
                }
            } catch (error) {
                showToast('Error changing email', 'error');
            }
        }

        async function submitChangePassword() {
            const currentPassword = document.getElementById('currentPasswordChange').value;
            const newPassword = document.getElementById('newPassword').value;
            const confirmPassword = document.getElementById('confirmNewPassword').value;

            if (newPassword !== confirmPassword) {
                showToast('New passwords do not match', 'error');
                return;
            }

            try {
                const response = await fetch('/tools/change-password', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        currentPassword: currentPassword,
                        newPassword: newPassword
                    })
                });

                const data = await response.json();
                
                if (data.success) {
                    showToast(data.message, 'success');
                    bootstrap.Modal.getInstance(document.getElementById('changePasswordModal')).hide();
                } else {
                    showToast(data.message, 'error');
                }
            } catch (error) {
                showToast('Error changing password', 'error');
            }
        }

        async function submitDeleteAccount() {
            const confirmation = document.getElementById('deleteConfirmation').value;
            const currentPassword = document.getElementById('currentPasswordDelete').value;

            try {
                const response = await fetch('/tools/delete-account', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        confirmation: confirmation,
                        currentPassword: currentPassword
                    })
                });

                const data = await response.json();
                
                if (data.success) {
                    showToast(data.message, 'success');
                    setTimeout(() => window.location.href = '/auth/register', 2000);
                } else {
                    showToast(data.message, 'error');
                }
            } catch (error) {
                showToast('Error deleting account', 'error');
            }
        }

        async function loadBillingHistory() {
            const historyContainer = document.getElementById('billingHistory');
            historyContainer.innerHTML = '<div class="text-center"><div class="spinner-border spinner-border-sm"></div> Loading...</div>';

            try {
                const response = await fetch('/tools/get-billing-history');
                const data = await response.json();
                
                if (data.length === 0) {
                    historyContainer.innerHTML = '<div class="text-center py-4"><i class="fas fa-file-invoice fa-2x text-muted mb-2"></i><div class="text-muted">No billing history available</div></div>';
                } else {
                    let html = '<div class="list-group list-group-flush">';
                    data.forEach(item => {
                        html += `
                            <div class="list-group-item bg-transparent border-secondary">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <div class="fw-semibold">${item.description}</div>
                                        <small class="text-muted">${item.date}</small>
                                    </div>
                                    <div class="text-end">
                                        <div class="fw-bold">${item.amount}</div>
                                        <span class="badge bg-${item.status === 'paid' ? 'success' : 'warning'}">${item.status}</span>
                                    </div>
                                </div>
                            </div>
                        `;
                    });
                    html += '</div>';
                    historyContainer.innerHTML = html;
                }
            } catch (error) {
                historyContainer.innerHTML = '<div class="text-danger">Error loading billing history</div>';
            }
        }



            // Calculate days remaining for subscription
            
        });
        
        // Handle modal scroll behavior
        document.addEventListener('DOMContentLoaded', function() {
            
                // When modal is shown, prevent body scrolling
                    document.body.classList.add('modal-open');
                    document.body.style.overflow = 'hidden';
                });
                
                // When modal is hidden, restore body scrolling
                    document.body.classList.remove('modal-open');
                    document.body.style.overflow = '';
                });
                
                // Prevent scrolling on modal backdrop
                        e.preventDefault();
                    }
                });
            }
        });
    </script>

                                <!-- Communication Tab -->
                                <div class="tab-pane fade" id="v-pills-communication" role="tabpanel">
                                    <div class="settings-section">
                                        <h6 class="text-primary mb-3"><i class="fas fa-at me-2"></i>Email &amp; Notifications</h6>
                                        <div class="settings-card p-3 mb-3">
                                            <h6 class="fw-semibold mb-3">Change Email Address</h6>
                                            <p class="text-muted small mb-3">Update your account email with verification</p>
                                            <div class="mb-3">
                                                <label class="form-label fw-semibold">Current Email</label>
                                                <input type="email" class="form-control settings-input" value="d9974519ea@emaily.pro" readonly="">
                                            </div>
                                            <button class="btn btn-outline-primary btn-sm">
                                                <i class="fas fa-envelope me-1"></i>Change Email
                                            </button>
                                        </div>

                                        <div class="settings-card p-3 mb-3">
                                            <h6 class="fw-semibold mb-3">Notification Settings</h6>
                                            <p class="text-muted small mb-3">Choose which types of alerts/emails to receive</p>
                                            
                                            <div class="d-flex justify-content-between align-items-center mb-3">
                                                <div>
                                                    <label class="form-label fw-semibold mb-1">Email Notifications</label>
                                                    <div><small class="text-muted">Tool updates and important alerts</small></div>
                                                </div>
                                                <div class="form-check form-switch">
                                                    <input class="form-check-input settings-switch" type="checkbox" id="emailNotifications" checked="">
                                                </div>
                                            </div>
                                            
                                            <div class="d-flex justify-content-between align-items-center mb-3">
                                                <div>
                                                    <label class="form-label fw-semibold mb-1">Browser Notifications</label>
                                                    <div><small class="text-muted">Desktop notifications in browser</small></div>
                                                </div>
                                                <div class="form-check form-switch">
                                                    <input class="form-check-input settings-switch" type="checkbox" id="browserNotifications">
                                                </div>
                                            </div>

                                            <div class="d-flex justify-content-between align-items-center">
                                                <div>
                                                    <label class="form-label fw-semibold mb-1">Marketing Emails</label>
                                                    <div><small class="text-muted">Tips, announcements, and promotional content</small></div>
                                                </div>
                                                <div class="form-check form-switch">
                                                    <input class="form-check-input settings-switch" type="checkbox" id="marketingEmails">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Billing Tab -->
                                <div class="tab-pane fade" id="v-pills-billing" role="tabpanel">
                                    <div class="settings-section">
                                        <h6 class="text-primary mb-3"><i class="fas fa-credit-card me-2"></i>Billing &amp; Subscription</h6>
                                        <div class="settings-card p-3 mb-3">
                                            <h6 class="fw-semibold mb-3">Current Plan</h6>
                                            <div class="d-flex justify-content-between align-items-center mb-3">
                                                <div>
                                                    <span class="badge bg-secondary me-2">
                                                        Free Plan
                                                    </span>
                                                    <small class="text-muted">
                                                        
                                                            No expiration
                                                        
                                                    </small>
                                                </div>
                                                <button class="btn btn-outline-primary btn-sm">
                                                    <i class="fas fa-arrow-up me-1"></i>Upgrade Plan
                                                </button>
                                            </div>
                                        </div>

                                        <div class="settings-card p-3 mb-3">
                                            <h6 class="fw-semibold mb-3">Billing History</h6>
                                            <p class="text-muted small mb-3">View and download previous invoices and receipts</p>
                                            <button class="btn btn-outline-info btn-sm">
                                                <i class="fas fa-file-invoice me-1"></i>View Billing History
                                            </button>
                                        </div>

                                        
                                    </div>
                                </div>

                                <!-- Danger Zone Tab -->
                                <div class="tab-pane fade" id="v-pills-danger" role="tabpanel">
                                    <div class="settings-section">
                                        <h6 class="text-danger mb-3"><i class="fas fa-exclamation-triangle me-2"></i>Danger Zone</h6>
                                        <div class="settings-card border-danger p-3">
                                            <h6 class="fw-semibold text-danger mb-3">Delete Account</h6>
                                            <p class="text-muted small mb-3">
                                                Permanently remove your account and all associated data. This action cannot be undone.
                                            </p>
                                            <div class="alert alert-danger small mb-3">
                                                <i class="fas fa-exclamation-triangle me-2"></i>
                                                <strong>Warning:</strong> This will delete all your data, usage history, and settings permanently.
                                            </div>
                                            <button class="btn btn-danger btn-sm" onclick="confirmDeleteAccount()">
                                                <i class="fas fa-trash me-1"></i>Delete Account
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>